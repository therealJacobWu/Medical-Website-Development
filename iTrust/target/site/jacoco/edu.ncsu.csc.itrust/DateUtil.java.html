<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>DateUtil.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">iTrust</a> &gt; <a href="index.source.html" class="el_package">edu.ncsu.csc.itrust</a> &gt; <span class="el_source">DateUtil.java</span></div><h1>DateUtil.java</h1><pre class="source lang-java linenums">package edu.ncsu.csc.itrust;

import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.GregorianCalendar;

/**
 * Provides a few extra date utilities
 * 
 *  :)
 * 
 */
<span class="nc" id="L14">public class DateUtil {</span>
	public static final long YEAR_IN_MS = 1000L * 60L * 60L * 24L * 365L;

	/**
	 * Returns a MM/dd/yyyy format of the date for the given years ago
	 * 
	 * @param years
	 * @return
	 */
	public static String yearsAgo(long years) {
<span class="fc" id="L24">		Calendar rightNow = Calendar.getInstance();</span>
<span class="fc" id="L25">		rightNow.set(Calendar.YEAR, rightNow.get(Calendar.YEAR) - (int)(years));</span>
<span class="fc" id="L26">		return new SimpleDateFormat(&quot;MM/dd/yyyy&quot;).format(rightNow.getTime());</span>
	}

	/**
	 * Checks to see if a given date is within a range of months &lt;strong&gt;INCLUSIVELY&lt;/strong&gt;, agnostic of
	 * the year. &lt;br /&gt;
	 * &lt;br /&gt;
	 * 
	 * The range &quot;wraps&quot; so that if the first month is after the second month, then the definition of &quot;is in
	 * month range&quot; is:&lt;br /&gt;
	 * the date falls outside of secondMonth, firstMonth, but including secondMonth and firstMonth.
	 * 
	 * Modular arithmetic is used to adjust month values into the valid range.
	 * 
	 * @param date
	 * @param firstMonth
	 * @param secondMonth
	 * @return
	 */
	public static boolean isInMonthRange(java.util.Date date, int firstMonth, int secondMonth) {
<span class="fc" id="L46">		Calendar cal = new GregorianCalendar();</span>
<span class="fc" id="L47">		cal.setTime(date);</span>
<span class="fc" id="L48">		firstMonth %= 12;</span>
<span class="fc" id="L49">		secondMonth %= 12;</span>
<span class="fc bfc" id="L50" title="All 2 branches covered.">		if (secondMonth &gt;= firstMonth) {</span>
<span class="pc bpc" id="L51" title="2 of 4 branches missed.">			return ((cal.get(Calendar.MONTH) &gt;= firstMonth) &amp;&amp; (cal.get(Calendar.MONTH) &lt;= secondMonth));</span>
		}
<span class="pc bpc" id="L53" title="2 of 4 branches missed.">		return ((cal.get(Calendar.MONTH) &gt;= firstMonth) || (cal.get(Calendar.MONTH) &lt;= secondMonth));</span>
	}

	/**
	 * Same as isInMonthRange but uses the current date as the date value.
	 * 
	 * @see DateUtil#isInMonthRange(Date, int, int)
	 * @param firstMonth
	 * @param secondMonth
	 * @return
	 */
	public static boolean currentlyInMonthRange(int firstMonth, int secondMonth) {
<span class="fc" id="L65">		return isInMonthRange(new Date(), firstMonth, secondMonth);</span>
	}

	/**
	 * Returns the date a certain number of years ago
	 * @param years how many years ago
	 * @return the date it was however many years ago
	 */
	public static Date getDateXyearsAgoFromNow(int years) {
<span class="fc" id="L74">		Calendar cal = new GregorianCalendar();</span>
<span class="fc" id="L75">		cal.add(Calendar.YEAR, -years);</span>
<span class="fc" id="L76">		return cal.getTime();</span>
	}

	/**
	 * Returns the date a certain number of years ago
	 * @param years how many years ago
	 * @return the date it was however many years ago
	 */
	public static java.sql.Date getSQLdateXyearsAgoFromNow(int years) {
<span class="fc" id="L85">		return new java.sql.Date(getDateXyearsAgoFromNow(years).getTime());</span>
	}

	/**
	 * Returns the date a certain number of days ago
	 * @param days how many days ago
	 * @return the date it was however many days ago
	 */
	public static Date getDateXDaysAgoFromNow(int days) {
<span class="fc" id="L94">		Calendar cal = new GregorianCalendar();</span>
<span class="fc" id="L95">		cal.add(Calendar.DAY_OF_YEAR, -days);</span>
<span class="fc" id="L96">		return cal.getTime();</span>
	}
	
	/**
	 * Returns the date a certain number of days ago
	 * @param days how many days ago
	 * @return the date it was however many days ago
	 */
	public static java.sql.Date getSQLdateXDaysAgoFromNow(int days) {
<span class="fc" id="L105">		return new java.sql.Date(getDateXDaysAgoFromNow(days).getTime());</span>
	}

	/**
	 * &lt;!--Pass in INSTANTIATED sql date objects and they will be set to the specified range, ie, FROM
	 * &lt;current year&gt; - yearsAgo1/monthValue1/01 TO &lt;current year&gt; - yearsAgo2/monthValue2/&lt;last day of
	 * month2&gt;--&gt; Pass in INSTANTIATED sql date objects and they will be set to the specified range, ie, FROM
	 * &amp;lt;current year&amp;gt; - yearsAgo1/monthValue1/01 TO &amp;lt;current year&amp;gt; -
	 * yearsAgo2/monthValue2/&amp;lt;last day of month2&amp;gt;
	 * 
	 * @param month1
	 *            First sql.Date object to be set
	 * @param monthValue1
	 * @param yearsAgo1
	 * @param month2
	 *            Second sql.Date object to be set
	 * @param monthValue2
	 * @param yearsAgo2
	 */
	public static void setSQLMonthRange(java.sql.Date month1, int monthValue1, int yearsAgo1,
			java.sql.Date month2, int monthValue2, int yearsAgo2) {
<span class="fc" id="L126">		GregorianCalendar cal = new GregorianCalendar();</span>
<span class="fc" id="L127">		cal.add(Calendar.YEAR, -yearsAgo1);</span>
<span class="fc" id="L128">		cal.set(Calendar.MONTH, monthValue1);</span>
<span class="fc" id="L129">		cal.set(Calendar.DAY_OF_MONTH, 1);</span>
<span class="fc" id="L130">		month1.setTime(cal.getTimeInMillis());</span>
<span class="fc" id="L131">		cal.add(Calendar.YEAR, yearsAgo1);</span>
<span class="fc" id="L132">		cal.add(Calendar.YEAR, -yearsAgo2);</span>
<span class="fc" id="L133">		cal.set(Calendar.MONTH, monthValue2);</span>
<span class="fc" id="L134">		cal.set(Calendar.DAY_OF_MONTH, cal.getActualMaximum(Calendar.DAY_OF_MONTH));</span>
<span class="fc" id="L135">		month2.setTime(cal.getTimeInMillis());</span>
<span class="fc" id="L136">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.4.201502262128</span></div></body></html>